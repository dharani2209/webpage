{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _pathToRegexp = require('path-to-regexp');\n\nvar _pathToRegexp2 = _interopRequireDefault(_pathToRegexp);\n\nvar _NavigationActions = require('../NavigationActions');\n\nvar _NavigationActions2 = _interopRequireDefault(_NavigationActions);\n\nvar _createConfigGetter = require('./createConfigGetter');\n\nvar _createConfigGetter2 = _interopRequireDefault(_createConfigGetter);\n\nvar _getScreenForRouteName = require('./getScreenForRouteName');\n\nvar _getScreenForRouteName2 = _interopRequireDefault(_getScreenForRouteName);\n\nvar _StateUtils = require('../StateUtils');\n\nvar _StateUtils2 = _interopRequireDefault(_StateUtils);\n\nvar _validateRouteConfigMap = require('./validateRouteConfigMap');\n\nvar _validateRouteConfigMap2 = _interopRequireDefault(_validateRouteConfigMap);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nvar uniqueBaseId = 'id-' + Date.now();\nvar uuidCount = 0;\n\nfunction _getUuid() {\n  return uniqueBaseId + '-' + uuidCount++;\n}\n\nexports.default = function (routeConfigs) {\n  var stackConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  (0, _validateRouteConfigMap2.default)(routeConfigs);\n  var childRouters = {};\n  var routeNames = Object.keys(routeConfigs);\n  routeNames.forEach(function (routeName) {\n    var screen = (0, _getScreenForRouteName2.default)(routeConfigs, routeName);\n\n    if (screen && screen.router) {\n      childRouters[routeName] = screen.router;\n    } else {\n      childRouters[routeName] = null;\n    }\n  });\n  var initialRouteParams = stackConfig.initialRouteParams;\n  var initialRouteName = stackConfig.initialRouteName || routeNames[0];\n  var initialChildRouter = childRouters[initialRouteName];\n  var paths = stackConfig.paths || {};\n  routeNames.forEach(function (routeName) {\n    var pathPattern = paths[routeName] || routeConfigs[routeName].path;\n    var matchExact = !!pathPattern && !childRouters[routeName];\n\n    if (!pathPattern) {\n      pathPattern = routeName;\n    }\n\n    var keys = [];\n    var re = (0, _pathToRegexp2.default)(pathPattern, keys);\n\n    if (!matchExact) {\n      var wildcardRe = (0, _pathToRegexp2.default)(pathPattern + '/*', keys);\n      re = new RegExp('(?:' + re.source + ')|(?:' + wildcardRe.source + ')');\n    }\n\n    paths[routeName] = {\n      re: re,\n      keys: keys\n    };\n  });\n  return {\n    getComponentForState: function getComponentForState(state) {\n      var activeChildRoute = state.routes[state.index];\n      var routeName = activeChildRoute.routeName;\n\n      if (childRouters[routeName]) {\n        return childRouters[routeName].getComponentForState(activeChildRoute);\n      }\n\n      return (0, _getScreenForRouteName2.default)(routeConfigs, routeName);\n    },\n    getComponentForRouteName: function getComponentForRouteName(routeName) {\n      return (0, _getScreenForRouteName2.default)(routeConfigs, routeName);\n    },\n    getStateForAction: function getStateForAction(action, state) {\n      action = _NavigationActions2.default.mapDeprecatedActionAndWarn(action);\n\n      if (!state) {\n        var route = {};\n\n        if (action.type === _NavigationActions2.default.NAVIGATE && childRouters[action.routeName] !== undefined) {\n          return {\n            index: 0,\n            routes: [_extends({}, action, {\n              type: undefined,\n              key: 'Init'\n            })]\n          };\n        }\n\n        if (initialChildRouter) {\n          route = initialChildRouter.getStateForAction(_NavigationActions2.default.navigate({\n            routeName: initialRouteName,\n            params: initialRouteParams\n          }));\n        }\n\n        var _params = (route.params || action.params || initialRouteParams) && _extends({}, route.params || {}, action.params || {}, initialRouteParams || {});\n\n        route = _extends({}, route, {\n          routeName: initialRouteName,\n          key: 'Init'\n        }, _params ? {\n          params: _params\n        } : {});\n        state = {\n          index: 0,\n          routes: [route]\n        };\n      }\n\n      var currentRoute = state.routes[state.index];\n      var childRouter = childRouters[currentRoute.routeName];\n\n      if (childRouter) {\n        var _route = childRouter.getStateForAction(action, currentRoute);\n\n        if (_route && _route !== currentRoute) {\n          return _StateUtils2.default.replaceAt(state, currentRoute.key, _route);\n        }\n      }\n\n      if (action.type === _NavigationActions2.default.NAVIGATE && childRouters[action.routeName] !== undefined) {\n        var _childRouter = childRouters[action.routeName];\n\n        var _route2 = void 0;\n\n        if (_childRouter) {\n          var childAction = action.action || _NavigationActions2.default.init({\n            params: action.params\n          });\n\n          _route2 = _extends({}, action, _childRouter.getStateForAction(childAction), {\n            key: _getUuid(),\n            routeName: action.routeName\n          });\n        } else {\n          _route2 = _extends({}, action, {\n            key: _getUuid(),\n            routeName: action.routeName\n          });\n        }\n\n        return _StateUtils2.default.push(state, _route2);\n      }\n\n      if (action.type === _NavigationActions2.default.SET_PARAMS) {\n        var lastRoute = state.routes.find(function (route) {\n          return route.key === action.key;\n        });\n\n        if (lastRoute) {\n          var _params2 = _extends({}, lastRoute.params, action.params);\n\n          var routes = [].concat(_toConsumableArray(state.routes));\n          routes[state.routes.indexOf(lastRoute)] = _extends({}, lastRoute, {\n            params: _params2\n          });\n          return _extends({}, state, {\n            routes: routes\n          });\n        }\n      }\n\n      if (action.type === _NavigationActions2.default.RESET) {\n        var resetAction = action;\n        return _extends({}, state, {\n          routes: resetAction.actions.map(function (action, index) {\n            var router = childRouters[action.routeName];\n\n            if (router) {\n              return _extends({}, action, router.getStateForAction(action), {\n                routeName: action.routeName,\n                key: 'Init' + index\n              });\n            }\n\n            var route = _extends({}, action, {\n              key: 'Init' + index\n            });\n\n            delete route.type;\n            return route;\n          }),\n          index: action.index\n        });\n      }\n\n      if (action.type === _NavigationActions2.default.BACK) {\n        var backRouteIndex = null;\n\n        if (action.key) {\n          var backRoute = state.routes.find(function (route) {\n            return route.key === action.key;\n          });\n          backRouteIndex = state.routes.indexOf(backRoute);\n        }\n\n        if (backRouteIndex == null) {\n          return _StateUtils2.default.pop(state);\n        }\n\n        if (backRouteIndex > 0) {\n          return _extends({}, state, {\n            routes: state.routes.slice(0, backRouteIndex),\n            index: backRouteIndex - 1\n          });\n        }\n      }\n\n      return state;\n    },\n    getPathAndParamsForState: function getPathAndParamsForState(state) {\n      return {\n        path: ''\n      };\n    },\n    getActionForPathAndParams: function getActionForPathAndParams(pathToResolve) {\n      if (!pathToResolve) {\n        return _NavigationActions2.default.navigate({\n          routeName: initialRouteName\n        });\n      }\n\n      var matchedRouteName = void 0;\n      var pathMatch = void 0;\n      var pathMatchKeys = void 0;\n\n      for (var routeName in paths) {\n        var _paths$routeName = paths[routeName],\n            re = _paths$routeName.re,\n            keys = _paths$routeName.keys;\n        pathMatch = re.exec(pathToResolve);\n\n        if (pathMatch && pathMatch.length) {\n          pathMatchKeys = keys;\n          matchedRouteName = routeName;\n          break;\n        }\n      }\n\n      if (!matchedRouteName) {\n        return null;\n      }\n\n      var nestedAction = void 0;\n\n      if (childRouters[matchedRouteName]) {\n        nestedAction = childRouters[matchedRouteName].getActionForPathAndParams(pathMatch.slice(pathMatchKeys.length).join('/'));\n      }\n\n      var params = pathMatch.slice(1).reduce(function (result, matchResult, i) {\n        var key = pathMatchKeys[i];\n\n        if (key.asterisk || !key) {\n          return result;\n        }\n\n        var nextResult = result || {};\n        var paramName = key.name;\n        nextResult[paramName] = matchResult;\n        return nextResult;\n      }, null);\n      return _NavigationActions2.default.navigate(_extends({\n        routeName: matchedRouteName\n      }, params ? {\n        params: params\n      } : {}, nestedAction ? {\n        action: nestedAction\n      } : {}));\n    },\n    getScreenConfig: (0, _createConfigGetter2.default)(routeConfigs, stackConfig.navigationOptions)\n  };\n};","map":{"version":3,"sources":["C:/webpage/frontend/node_modules/react-navigation/lib/routers/StackRouter.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_pathToRegexp","require","_pathToRegexp2","_interopRequireDefault","_NavigationActions","_NavigationActions2","_createConfigGetter","_createConfigGetter2","_getScreenForRouteName","_getScreenForRouteName2","_StateUtils","_StateUtils2","_validateRouteConfigMap","_validateRouteConfigMap2","obj","__esModule","default","_toConsumableArray","arr","Array","isArray","arr2","from","uniqueBaseId","Date","now","uuidCount","_getUuid","routeConfigs","stackConfig","undefined","childRouters","routeNames","keys","forEach","routeName","screen","router","initialRouteParams","initialRouteName","initialChildRouter","paths","pathPattern","path","matchExact","re","wildcardRe","RegExp","getComponentForState","state","activeChildRoute","routes","index","getComponentForRouteName","getStateForAction","action","mapDeprecatedActionAndWarn","route","type","NAVIGATE","navigate","params","_params","currentRoute","childRouter","_route","replaceAt","_childRouter","_route2","childAction","init","push","SET_PARAMS","lastRoute","find","_params2","concat","indexOf","RESET","resetAction","actions","map","BACK","backRouteIndex","backRoute","pop","slice","getPathAndParamsForState","getActionForPathAndParams","pathToResolve","matchedRouteName","pathMatch","pathMatchKeys","_paths$routeName","exec","nestedAction","join","reduce","result","matchResult","asterisk","nextResult","paramName","name","getScreenConfig","navigationOptions"],"mappings":"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","sourcesContent":["'use strict';Object.defineProperty(exports,\"__esModule\",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};\n\nvar _pathToRegexp=require('path-to-regexp');var _pathToRegexp2=_interopRequireDefault(_pathToRegexp);\n\nvar _NavigationActions=require('../NavigationActions');var _NavigationActions2=_interopRequireDefault(_NavigationActions);\nvar _createConfigGetter=require('./createConfigGetter');var _createConfigGetter2=_interopRequireDefault(_createConfigGetter);\nvar _getScreenForRouteName=require('./getScreenForRouteName');var _getScreenForRouteName2=_interopRequireDefault(_getScreenForRouteName);\nvar _StateUtils=require('../StateUtils');var _StateUtils2=_interopRequireDefault(_StateUtils);\nvar _validateRouteConfigMap=require('./validateRouteConfigMap');var _validateRouteConfigMap2=_interopRequireDefault(_validateRouteConfigMap);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar uniqueBaseId='id-'+Date.now();\nvar uuidCount=0;\nfunction _getUuid(){\nreturn uniqueBaseId+'-'+uuidCount++;\n}exports.default=\n\nfunction(\nrouteConfigs)\n\n{var stackConfig=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};\n\n(0,_validateRouteConfigMap2.default)(routeConfigs);\n\nvar childRouters={};\nvar routeNames=Object.keys(routeConfigs);\n\nrouteNames.forEach(function(routeName){\nvar screen=(0,_getScreenForRouteName2.default)(routeConfigs,routeName);\nif(screen&&screen.router){\n\nchildRouters[routeName]=screen.router;\n}else{\n\nchildRouters[routeName]=null;\n}\n});var\n\n\ninitialRouteParams=\nstackConfig.initialRouteParams;\n\nvar initialRouteName=stackConfig.initialRouteName||routeNames[0];\n\nvar initialChildRouter=childRouters[initialRouteName];\nvar paths=stackConfig.paths||{};\n\nrouteNames.forEach(function(routeName){\nvar pathPattern=paths[routeName]||routeConfigs[routeName].path;\nvar matchExact=!!pathPattern&&!childRouters[routeName];\nif(!pathPattern){\npathPattern=routeName;\n}\nvar keys=[];\nvar re=(0,_pathToRegexp2.default)(pathPattern,keys);\nif(!matchExact){\nvar wildcardRe=(0,_pathToRegexp2.default)(pathPattern+'/*',keys);\nre=new RegExp('(?:'+re.source+')|(?:'+wildcardRe.source+')');\n}\n\npaths[routeName]={re:re,keys:keys};\n});\n\nreturn{\n\ngetComponentForState:function getComponentForState(state){\nvar activeChildRoute=state.routes[state.index];var\nrouteName=activeChildRoute.routeName;\nif(childRouters[routeName]){\nreturn childRouters[routeName].getComponentForState(activeChildRoute);\n}\nreturn(0,_getScreenForRouteName2.default)(routeConfigs,routeName);\n},\n\ngetComponentForRouteName:function getComponentForRouteName(routeName){\nreturn(0,_getScreenForRouteName2.default)(routeConfigs,routeName);\n},\n\ngetStateForAction:function getStateForAction(action,state){\naction=_NavigationActions2.default.mapDeprecatedActionAndWarn(action);\n\n\nif(!state){\nvar route={};\nif(action.type===_NavigationActions2.default.NAVIGATE&&childRouters[action.routeName]!==undefined){\nreturn{\nindex:0,\nroutes:[_extends({},\n\naction,{\ntype:undefined,\nkey:'Init'})]};\n\n\n\n}\nif(initialChildRouter){\nroute=initialChildRouter.getStateForAction(_NavigationActions2.default.navigate({\nrouteName:initialRouteName,\nparams:initialRouteParams}));\n\n}\nvar _params=(route.params||action.params||initialRouteParams)&&_extends({},\nroute.params||{},\naction.params||{},\ninitialRouteParams||{});\n\nroute=_extends({},\nroute,{\nrouteName:initialRouteName,\nkey:'Init'},\n_params?{params:_params}:{});\n\nstate={\nindex:0,\nroutes:[route]};\n\n}\n\n\nvar currentRoute=state.routes[state.index];\nvar childRouter=childRouters[currentRoute.routeName];\nif(childRouter){\nvar _route=childRouter.getStateForAction(action,currentRoute);\nif(_route&&_route!==currentRoute){\nreturn _StateUtils2.default.replaceAt(state,currentRoute.key,_route);\n}\n}\n\n\nif(action.type===_NavigationActions2.default.NAVIGATE&&childRouters[action.routeName]!==undefined){\nvar _childRouter=childRouters[action.routeName];\nvar _route2=void 0;\nif(_childRouter){\nvar childAction=action.action||_NavigationActions2.default.init({params:action.params});\n_route2=_extends({},\naction,\n_childRouter.getStateForAction(childAction),{\nkey:_getUuid(),\nrouteName:action.routeName});\n\n}else{\n_route2=_extends({},\naction,{\nkey:_getUuid(),\nrouteName:action.routeName});\n\n}\nreturn _StateUtils2.default.push(state,_route2);\n}\n\nif(action.type===_NavigationActions2.default.SET_PARAMS){\n\nvar lastRoute=state.routes.find(function(route){return route.key===action.key;});\nif(lastRoute){\nvar _params2=_extends({},\nlastRoute.params,\naction.params);\n\nvar routes=[].concat(_toConsumableArray(state.routes));\nroutes[state.routes.indexOf(lastRoute)]=_extends({},\nlastRoute,{\nparams:_params2});\n\nreturn _extends({},\nstate,{\nroutes:routes});\n\n}\n}\n\nif(action.type===_NavigationActions2.default.RESET){\nvar resetAction=action;\n\nreturn _extends({},\nstate,{\nroutes:resetAction.actions.map(function(action,index){\nvar router=childRouters[action.routeName];\nif(router){\nreturn _extends({},\naction,\nrouter.getStateForAction(action),{\nrouteName:action.routeName,\nkey:'Init'+index});\n\n}\nvar route=_extends({},\naction,{\nkey:'Init'+index});\n\ndelete route.type;\nreturn route;\n}),\nindex:action.index});\n\n}\n\nif(action.type===_NavigationActions2.default.BACK){\nvar backRouteIndex=null;\nif(action.key){\n\nvar backRoute=state.routes.find(function(route){return route.key===action.key;});\n\nbackRouteIndex=state.routes.indexOf(backRoute);\n}\nif(backRouteIndex==null){\nreturn _StateUtils2.default.pop(state);\n}\nif(backRouteIndex>0){\nreturn _extends({},\nstate,{\nroutes:state.routes.slice(0,backRouteIndex),\nindex:backRouteIndex-1});\n\n}\n}\nreturn state;\n},\n\ngetPathAndParamsForState:function getPathAndParamsForState(state){\n\nreturn{\npath:''};\n\n},\n\ngetActionForPathAndParams:function getActionForPathAndParams(pathToResolve){\n\n\nif(!pathToResolve){\nreturn _NavigationActions2.default.navigate({\nrouteName:initialRouteName});\n\n}\n\n\n\nvar matchedRouteName=void 0;\nvar pathMatch=void 0;\nvar pathMatchKeys=void 0;\n\nfor(var routeName in paths){var _paths$routeName=\n\npaths[routeName],re=_paths$routeName.re,keys=_paths$routeName.keys;\npathMatch=re.exec(pathToResolve);\nif(pathMatch&&pathMatch.length){\npathMatchKeys=keys;\nmatchedRouteName=routeName;\nbreak;\n}\n}\n\n\nif(!matchedRouteName){\nreturn null;\n}\n\n\n\n\n\nvar nestedAction=void 0;\nif(childRouters[matchedRouteName]){\nnestedAction=childRouters[matchedRouteName].getActionForPathAndParams(\n\npathMatch.slice(pathMatchKeys.length).join('/'));\n\n}\n\n\n\n\nvar params=pathMatch.slice(1).reduce(function(result,matchResult,i){\nvar key=pathMatchKeys[i];\nif(key.asterisk||!key){\nreturn result;\n}\nvar nextResult=result||{};\nvar paramName=key.name;\nnextResult[paramName]=matchResult;\nreturn nextResult;\n},null);\n\nreturn _NavigationActions2.default.navigate(_extends({\nrouteName:matchedRouteName},\nparams?{params:params}:{},\nnestedAction?{action:nestedAction}:{}));\n\n},\n\ngetScreenConfig:(0,_createConfigGetter2.default)(routeConfigs,stackConfig.navigationOptions)};\n\n\n};"]},"metadata":{},"sourceType":"script"}